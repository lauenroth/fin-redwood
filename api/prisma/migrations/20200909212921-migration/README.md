# Migration `20200909212921-migration`

This migration has been generated by JÃ¶rg Lauenroth at 9/9/2020, 11:29:21 PM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
ALTER TABLE "public"."Invoice" ADD COLUMN "status" text   DEFAULT E'sent'

CREATE TABLE "public"."TimeTracking" (
"id" SERIAL,
"clientId" integer   NOT NULL ,
"date" timestamp(3)   NOT NULL ,
"hours" Decimal(65,30)   NOT NULL ,
"createdAt" timestamp(3)   DEFAULT CURRENT_TIMESTAMP,
PRIMARY KEY ("id")
)

ALTER TABLE "public"."TimeTracking" ADD FOREIGN KEY ("clientId")REFERENCES "public"."Client"("id") ON DELETE CASCADE ON UPDATE CASCADE
```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration 20200907193343-invoices..20200909212921-migration
--- datamodel.dml
+++ datamodel.dml
@@ -1,26 +1,27 @@
 datasource DS {
   provider = "postgres"
-  url = "***"
+  url = "***"
 }
 generator client {
   provider      = "prisma-client-js"
   binaryTargets = env("BINARY_TARGET")
 }
 model Client {
-  id        Int       @id @default(autoincrement())
-  name      String    @unique
-  address   String?
-  email     String?
-  phone     String?
-  website   String?
-  vat       String?
-  notes     String?
-  invoices  Invoice[]
-  createdAt DateTime? @default(now())
-  updatedAt DateTime? @default(now())
+  id           Int            @id @default(autoincrement())
+  name         String         @unique
+  address      String?
+  email        String?
+  phone        String?
+  website      String?
+  vat          String?
+  notes        String?
+  invoices     Invoice[]
+  createdAt    DateTime?      @default(now())
+  updatedAt    DateTime?      @default(now())
+  TimeTracking TimeTracking[]
 }
 model Transaction {
   id              Int       @id @default(autoincrement())
@@ -40,13 +41,23 @@
 }
 model Invoice {
   id        Int       @id @default(autoincrement())
+  client    Client    @relation(fields: [clientId], references: [id])
+  clientId  Int
   number    String    @unique
   date      DateTime
-  client    Client    @relation(fields: [clientId], references: [id])
-  clientId  Int
+  status    String?   @default("sent")
   items     Json?
   total     Float
   createdAt DateTime? @default(now())
   updatedAt DateTime? @default(now())
 }
+
+model TimeTracking {
+  id        Int       @id @default(autoincrement())
+  client    Client    @relation(fields: [clientId], references: [id])
+  clientId  Int
+  date      DateTime
+  hours     Float
+  createdAt DateTime? @default(now())
+}
```


